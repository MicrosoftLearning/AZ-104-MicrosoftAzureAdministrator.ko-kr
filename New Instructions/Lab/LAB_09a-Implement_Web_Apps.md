---
lab:
  title: '랩 09a: Web Apps 구현'
  module: Administer PaaS Compute Options
---

# 랩 09a - 웹앱 구현


## 랩 소개

이 랩에서는 Azure 웹앱에 대해 알아봅니다. 외부 GitHub 리포지토리에 헬로 월드 애플리케이션을 표시하도록 웹앱을 구성하는 방법을 알아봅니다. 스테이징 슬롯을 만들고 프로덕션 슬롯과 교환하는 방법을 알아봅니다. 또한 수요 변경을 수용하기 위한 자동 크기 조정에 대해서도 알아봅니다.

이 랩에는 Azure 구독이 필요합니다. 구독 유형은 이 랩의 기능 가용성에 영향을 줄 수 있습니다. 지역을 변경할 수 있지만 단계는 미국 동부를 사용하여 작성됩니다.

## 예상 소요 시간: 30분

## 랩 시나리오

조직에서는 조직의 웹 사이트를 호스트하기 위해 Azure Web Apps에 관심이 있습니다. 웹 사이트는 현재 회사의 온-프레미스 데이터 센터에서 호스트됩니다. 웹 사이트는 PHP 런타임 스택을 사용하여 Windows 서버에서 실행되고 있습니다. 하드웨어의 수명이 거의 끝나가고 있으며 곧 교체가 필요합니다. 조직은 수명이 종료되기 전에 Azure로 쉽게 이동할 수 있도록 테스트를 완료하려고 합니다.

## 대화형 랩 시뮬레이션

이 항목에 유용할 수 있는 대화형 랩 시뮬레이션이 있습니다. 시뮬레이션을 사용하면 비슷한 시나리오를 원하는 속도로 클릭할 수 있습니다. 대화형 시뮬레이션과 이 랩 사이에는 차이점이 있지만, 대부분의 핵심 개념은 동일합니다. Azure 구독은 필요하지 않습니다.

+ [웹앱을 만듭니다](https://mslearn.cloudguides.com/en-us/guides/AZ-900%20Exam%20Guide%20-%20Azure%20Fundamentals%20Exercise%202). Docker 컨테이너를 실행하는 웹앱을 만듭니다.
    
+ [Azure 웹앱을 구현합니다](https://mslabs.cloudguides.com/guides/AZ-104%20Exam%20Guide%20-%20Microsoft%20Azure%20Administrator%20Exercise%2013). Azure 웹앱을 만들고, 배포를 관리하고, 앱을 확장합니다. 

## 아키텍처 다이어그램

![작업의 다이어그램.](../media/az104-lab09a-architecture-diagram.png)

## 작업

+ 작업 1: Azure 웹앱 만들기
+ 작업 2: 스테이징 배포 슬롯 만들기
+ 작업 3: 웹앱 배포 설정 구성
+ 작업 4: 스테이징 슬롯 교환
+ 작업 5: Azure 웹앱의 자동 크기 조정 구성 및 테스트

## 작업 1: Azure 웹앱 만들기

이 작업에서는 Azure 웹앱을 만듭니다. Azure는 웹, 모바일 및 기타 웹 기반 애플리케이션을 위한 PAAS(Platform As a Service) 솔루션인 Azure 앱 Services를 제공합니다. Azure 앱 Services 제품의 한 유형인 Azure Web Apps는 PHP, Java, .NET 등과 같은 대부분의 런타임 환경에 대한 웹 사이트를 실행하는 데 사용할 수 있습니다. 둘 이상의 런타임 환경에 대한 지원이 필요한 경우 Docker 컨테이너와 함께 App Services를 사용할 수 있습니다. 선택한 SKU는 웹앱으로 수신하는 컴퓨팅, 스토리지 및 기능의 양을 결정합니다.

1. **Azure Portal** - `https://portal.azure.com`에 로그인합니다.

1. `App services`을 검색하고 선택합니다.

1. 드롭다운 메뉴에서 +** 만들기**를 **선택합니다**. 다른 선택 사항을 확인합니다. 

1. **웹앱 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다(다른 설정은 기본값으로 유지).

    | 설정 | 값 |
    | --- | ---|
    | 구독 | 이 랩에서 사용 중인 Azure 구독의 이름 |
    | Resource group | `az104-rg9` (필요한 ** 경우새로** 만들기) |
    | 웹앱 이름 | 전역으로 고유한 이름 |
    | 게시 | **코드** |
    | 런타임 스택 | **PHP 8.2** |
    | 운영 체제 | **Linux** |
    | 지역 | **미국 동부** |
    | 가격 책정 계획 | 기본값 적용 |
    | 영역 중복 | 기본값 적용 |

 1. 검토 + 만들기**를 클릭한 다음 **만들기**를 클릭합니다**.

    >**참고**: 웹앱이 만들어질 때까지 기다린 후 다음 작업으로 진행합니다. 약 1분 정도 소요됩니다.

1. 배포 블레이드에서 **리소스로 이동**을 클릭합니다.

## 작업 2: 스테이징 배포 슬롯 만들기

이 작업에서는 스테이징 배포 슬롯을 만듭니다. 배포 슬롯은 퍼블릭(또는 최종 사용자)이 앱을 사용할 수 있도록 하기 전에 테스트를 수행할 수 있는 특정 App Service 계획의 기능입니다. 테스트를 수행한 후 개발 또는 스테이징에서 프로덕션으로 슬롯을 교환할 수 있습니다. 많은 조직에서 슬롯을 사용하여 사전 프로덕션 테스트를 수행합니다. 또한 많은 조직에서 모든 애플리케이션(예: 개발, QA, 테스트 및 프로덕션)에 대해 여러 슬롯을 실행합니다.

1. 새로 배포된 웹앱의 블레이드에서 기본 실행기본** 링크를 클릭하여 **새 브라우저 탭에 기본 웹 페이지를 표시합니다.

1. 새 브라우저 탭을 닫고 Azure Portal로 돌아가 웹앱 블레이드의 **배포** 섹션에서 **배포 슬롯**을 클릭합니다.

    >**참고**: 이 시점에서 웹앱에는 **PRODUCTION** 레이블이 붙여진 단일 배포 슬롯이 있습니다.

1. **+ 슬롯 추가**를 클릭하고 다음 설정으로 새 슬롯을 추가합니다.

    | 설정 | 값 |
    | --- | ---|
    | 속성 | `staging` |
    | 설정 복제 위치 | **설정을 복제하지 않음**|

1. **추가**를 선택합니다.

1. 웹앱의 **배포 슬롯** 블레이드로 돌아가서 새로 만든 스테이징 슬롯을 나타내는 항목을 클릭합니다.

    >**참고**: 이렇게 하면 스테이징 슬롯의 특성이 표시되는 블레이드가 열립니다.

1. 스테이징 슬롯 블레이드를 검토하고 URL이 프로덕션 슬롯에 할당된 URL과 다르다는 것에 유의합니다.

## 작업 3: 웹앱 배포 설정 구성

이 작업에서는 웹앱 배포 설정을 구성합니다. 선택한 리포지토리에서 연속 배포를 허용하거나 FTPS 자격 증명 및 기타 자동화를 사용하여 배포 설정을 사용하여 App Services를 구성할 수 있습니다. 이렇게 하면 앱 서비스에 최신 버전의 애플리케이션이 실행되고 있습니다.

1. 스테이징 배포 슬롯 블레이드의 **설정 섹션에서 구성**을 선택한 **다음 일반 설정을** 선택합니다****.

    >**참고:** 스테이징 슬롯 블레이드(프로덕션 슬롯 대신)에 있는지 확인합니다.
    
1. **설정** 탭의 **원본** 드롭다운 목록에서 외부 Git을** 선택합니다**.

1. 리포지토리 필드에 `https://github.com/Azure-Samples/php-docs-hello-world`

1. 분기 필드에 .를 입력합니다 `master`.

1. **저장**을 선택합니다.

1. 스테이징 슬롯에서 개요**를 선택합니다**.

1. **기본 do기본** 링크를 선택하고 새 탭에서 URL을 엽니다. 

1. 스테이징 슬롯에 헬로 월드** 표시되는지 확인합니다**.

## 작업 4: 스테이징 슬롯 교환

이 작업에서는 스테이징 슬롯을 프로덕션 슬롯과 교환합니다. 슬롯을 교환하면 스테이징 슬롯에서 테스트한 코드를 사용하고 프로덕션으로 이동할 수 있습니다. 또한 Azure Portal은 슬롯에 대해 사용자 지정한 다른 애플리케이션 설정을 이동해야 하는지 묻는 메시지를 표시합니다. 슬롯 교환은 애플리케이션 팀 및 애플리케이션 지원 팀, 특히 일상적인 앱 업데이트 및 버그 수정을 배포하는 팀의 일반적인 작업입니다.

1. 웹앱의 프로덕션 슬롯을 표시하는 블레이드로 다시 돌아갑니다.

1. **배포** 섹션에서 **배포 슬롯**을 클릭한 다음 **전환** 도구 모음 아이콘을 클릭합니다.

1. **교환** 블레이드에서 기본 설정을 검토하고 **교환**를 클릭합니다.

1. 웹앱의 프로덕션 슬롯 블레이드에서 개요를 클릭한 **다음 기본 실행기본** 링크를 클릭하여 **새 브라우저 탭에 웹 사이트 홈 페이지를 표시**합니다.

    >**참고:** 다음 작업에서 부하 테스트에 필요한 기본 기본 **URL**을 복사합니다. 

1. 기본 웹 페이지가 **Hello World!** 로 대체되었는지 확인합니다. 페이지에서 사용할 수 있는 바로 가기 키를 보여 줍니다.

## 작업 5: Azure 웹앱의 자동 크기 조정 구성 및 테스트

이 작업에서는 Azure 웹앱의 자동 크기 조정을 구성합니다. 자동 크기 조정을 사용하면 웹앱에 대한 트래픽이 증가할 때 웹앱에 대한 최적의 성능을 기본 수 있습니다.  대부분의 애플리케이션의 경우 앱에서 크기를 조정해야 하는 특정 메트릭을 알고 있을 수 있습니다. CPU 사용량, 메모리 또는 대역폭일 수 있습니다.

1. 웹앱의 프로덕션 슬롯을 표시하는 블레이드의 **설정** 섹션에서 **규모 확장(App Service 계획)** 을 클릭합니다.

1. **크기 조정 섹션에서 자동**을** 선택합니다**.

1. **최대 버스트** 필드에서 2**를 선택합니다**.

    ![자동 크기 조정 페이지의 스크린샷.](../media/az104-lab09a-autoscale.png)

1. **저장**을 선택합니다.

    >**참고**: 프로덕션 환경에서 조직은 종종 규칙 기반**을 선택하고 **자동 크기 조정을 트리거하는 특정 메트릭 또는 Application Insights 구성 요소에 대한 규칙을 구성합니다.

1. 웹앱의 프로덕션 슬롯을 표시하는 블레이드에서 진단 및 문제 해결을** 선택합니다**.

1. **앱** 부하 테스트 상자에서 부하 테스트** 만들기를 선택합니다**.

    + + 만들기를 선택하고 **부하 테스트에 **이름을** 지정**합니다.  이름은 고유해야 합니다.
    + **검토 + 만들기**를 선택한 다음, **만들기**를 선택합니다.

1. 부하 테스트가 생성되기를 기다린 다음 리소스**로 이동을 선택합니다**.

1. **개요**** | HTTP 요청** 추가에서 만들기**를 선택합니다.**

1. 테스트 URL**의 **경우 기본 do기본** URL에 **붙여넣습니다. 이 형식이 올바르게 지정되고 https://** 시작합니다**.

1. **검토 + 만들기** 및 **만들기**를 선택합니다.

    >**참고:** 테스트를 만드는 데 몇 분 정도 걸릴 수 있습니다. 

1. 가상 사용자 **, 응답 시간** 및 요청/초**를 **포함한 **테스트 **결과를 검토합니다.

1. 중지**를 선택하여 **테스트 실행을 완료합니다.
   
## 랩의 기본 지점 검토

랩을 완료한 것을 축하합니다. 다음은 이 랩에 대한 기본 설명입니다. 

+ Azure 앱 Services를 사용하면 웹앱을 신속하게 빌드, 배포 및 확장할 수 있습니다.
+ App Service에는 ASP.NET, Java, PHP 및 Python을 비롯한 많은 개발자 환경에 대한 지원이 포함됩니다.
+ 배포 슬롯을 사용하면 웹앱을 배포하고 테스트하기 위한 별도의 환경을 만들 수 있습니다.
+ 추가 수요를 처리하도록 웹앱을 수동으로 또는 자동으로 확장할 수 있습니다. 

## 리소스 정리

고유한 구독으로 작업하는 경우 랩 리소스를 삭제하는 데 1분이 소요됩니다. 이렇게 하면 리소스가 해제되고 비용이 최소화됩니다. 랩 리소스를 삭제하는 가장 쉬운 방법은 랩 리소스 그룹을 삭제하는 것입니다. 

+ Azure Portal에서 리소스 그룹을 선택하고, 리소스 그룹 삭제를 선택하고 **, **리소스 그룹** 이름을** 입력한 다음, 삭제**를 클릭합니다**.

+ Azure PowerShell 사용. `Remove-AzResourceGroup -Name resourceGroupName` 

+ CLI `az group delete --name resourceGroupName`를 사용하여 .
    
