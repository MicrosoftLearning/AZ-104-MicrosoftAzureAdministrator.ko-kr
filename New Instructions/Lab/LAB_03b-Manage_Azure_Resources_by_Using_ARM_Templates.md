---
lab:
  title: '랩 03b: ARM 템플릿을 사용하여 Azure 리소스 관리'
  module: Administer Azure Resources
---

# 랩 03b - ARM 템플릿을 사용하여 Azure 리소스 관리
# 학생용 랩 매뉴얼

## 랩 시나리오
팀은 리소스 프로비전 및 리소스 그룹을 기반으로 구성과 같은 기본 Azure 관리 기능을 살펴보했습니다. 다음으로, 팀은 배포를 자동화하고 간소화하는 방법을 찾고자 합니다. 조직에서는 관리자가 보다 복잡하거나 창의적인 작업을 수행할 수 있도록 자동화를 통해 관리 오버헤드를 줄이고, 사용자 오류를 줄이거나 일관성을 높이는 방법을 찾는 경우가 많습니다.

**참고:** **[대화형 랩 시뮬레이션](https://mslabs.cloudguides.com/guides/AZ-104%20Exam%20Guide%20-%20Microsoft%20Azure%20Administrator%20Exercise%205)** 을 사용하여 이 랩을 원하는 속도로 클릭할 수 있습니다. 대화형 시뮬레이션과 호스트된 랩 간에 약간의 차이가 있을 수 있지만 보여주는 핵심 개념과 아이디어는 동일합니다. 

## 목표

이 랩에서는 다음을 수행합니다.

+ 작업 1: Azure 관리 디스크 배포를 위한 ARM 템플릿 만들기
+ 작업 2: ARM 템플릿을 편집한 다음 템플릿을 사용하여 Azure 관리 디스크 만들기
+ 작업 3: 관리 디스크의 ARM 템플릿 기반 배포 검토

## 예상 소요 시간: 30분

## 아키텍처 다이어그램

![이미지](./media/az104-lab03b-architecture-diagram.png)

### Instructions

## 연습 1

## 작업 1: Azure 관리 디스크 배포를 위한 ARM 템플릿 만들기
이 작업에서는 Azure Portal을 사용하여 ARM 템플릿을 생성합니다. 그런 다음 이후 배포에서 사용할 템플릿을 다운로드할 수 있습니다. 수백 또는 수천 개의 디스크를 배포하려는 조직은 하나 이상의 템플릿을 활용하여 배포를 자동화할 수 있습니다. 이 작업에서는 Azure Portal을 사용합니다. 템플릿을 Azure Bicep으로 디컴파일할 수도 있습니다.

1. [**Azure Portal**](http://portal.azure.com)에 로그인합니다.

1. Azure Portal에서 검색하여 선택합니다 `Disks`.

1. 디스크 페이지에서 만들기**를 선택합니다**.

1. 관리 디스크 만들기 페이지에서 다음 정보를 사용하여 디스크를 만듭니다.
    
    | 설정 | 값 |
    | --- | --- |
    | 구독 | 사용 중인 구독 | 
    | 리소스 그룹 | `az104-rg1` (필요한 ** 경우새로 만듭니다**.)
    | 디스크 이름 | `az104-disk1` | 
    | 지역 | **미국 동부** |
    | 가용성 영역 | **인프라 중복 필요 없음** | 
    | 소스 형식 | **없음** |
    | 크기 | **32gb** | 
    | 성능 | **표준 HDD** |

    ![이미지](./media/az104-lab03b-createdisk.png)

1. 검토 + 만들기***를 한 번* 클릭합니다**. 실제로 리소스를 배포하지 마세요****.

1. 검토 + 만들기 탭에서 자동화**를 위한 템플릿 다운로드를 클릭합니다**.

1. 생성된 매개 변수 및 리소스를 포함하여 템플릿에 표시된 정보를 검토합니다.

1. 다운로드**를 클릭하고 **템플릿을 컴퓨터에 저장합니다.

1. 다운로드한 파일의 콘텐츠를 컴퓨터의 다운로드 폴더로 **추출합니다** .

    
1. **파일 탐색기** 창을 모두 닫습니다.

1. Azure Portal에서 관리 디스크 배포를 취소합니다.

## 작업 2: ARM 템플릿을 편집한 다음 템플릿을 사용하여 Azure 관리 디스크 만들기
이 작업에서는 만든 ARM 템플릿을 사용하여 새 관리 디스크를 배포합니다. 이 작업은 배포를 빠르고 쉽게 반복할 수 있도록 템플릿 기반 배포를 수행하는 일반적인 프로세스를 간략하게 설명합니다. 매개 변수를 한두 개 변경해야 하는 경우 나중에 템플릿을 쉽게 수정할 수 있습니다.

1. Azure Portal에서 검색하여 선택합니다 `Deploy a custom template`.

1. **사용자 지정 배포** 블레이드에서 **편집기에서 사용자 고유의 템플릿을 빌드합니다.** 를 클릭합니다.

1. **템플릿 편집** 블레이드에서 **파일 로드**를 클릭하고 이전 작업에서 다운로드한 **template.json** 파일을 업로드합니다.

1. 편집기 창에서 다음 줄을 제거합니다.

   ```json
    "sourceResourceId": {
            "type": "string"
    },
   ```
   
   ```json
      "hyperVGeneration": {
       "defaultValue": "V1",
       "type": "String"
   },      
   ```

    >**참고**: 이러한 매개 변수는 현재 배포에 적용할 수 없으므로 제거됩니다. 특히 sourceResourceId, sourceUri, osType 및 hyperVGeneration 매개 변수는 기존 VHD 파일에서 Azure 디스크를 만드는 데 적용할 수 있습니다.

1. 변경 내용을 **저장**합니다.

1. **사용자 지정 배포** 블레이드로 돌아가서 **매개 변수 편집**을 클릭합니다. 

1. **매개 변수 편집** 블레이드에서 **파일 로드**를 클릭하고 이전 작업에서 다운로드한 **parameters.json** 파일을 업로드한 후 변경 내용을 **저장**합니다.

1. **사용자 지정 배포** 블레이드로 돌아가서 다음 설정을 지정합니다.

    | 설정 | 값 |
    | --- |--- |
    | 구독 | *이 랩에서 사용 중인 Azure 구독의 이름* |
    | 리소스 그룹 | `az104-rg1` (필요한 ** 경우새로** 만들기)|
    | 지역 | 이 랩에서 사용 중인 구독에서 사용할 수 있는 Azure 지역 이름(일반적으로 **미국** 동부)입니다. |
    | 디스크 이름 | `az104-disk1` |
    | 위치 | 이전 작업에서 메모해 둔 location 매개 변수의 값 |
    | SKU | **Standard_LRS** |
    | 디스크 크기(GB) | **32** |
    | 옵션 만들기 | **empty** |
    | 디스크 암호화 집합 유형 | **EncryptionAtRestWithPlatformKey** |
    | 데이터 액세스 인증 모드 | 없음 |
    | 네트워크 액세스 정책 | **AllowAll** |
    | 공용 네트워크 액세스 | 사용 안 함 |

    ![이미지](./media/az104-lab03b-customdeploy.png)

1. **검토 + 생성**를 선택한 다음, **생성**를 선택합니다.

1. 배포가 성공적으로 완료되었는지 확인합니다.

## 작업 3: 관리 디스크의 ARM 템플릿 기반 배포 검토
이 작업에서는 배포가 성공적으로 완료되었는지 확인합니다. 모든 이전 배포는 배포가 대상으로 지정된 리소스 그룹에 설명되어 있습니다. 이 검토는 배포 시간 및 기간에 대한 세부 정보를 보여 줍니다. 이는 문제 해결 시 유용할 수 있습니다. 대규모 작업에 템플릿을 사용하기 전에 성공을 보장하기 위해 처음 몇 가지 템플릿 기반 배포를 검토하는 것이 좋습니다.

1. Azure Portal에서 **리소스 그룹**을 검색하고 선택합니다. 

1. 리소스 그룹 목록에서 az104-rg1**을 클릭합니다**.

1. az104-rg1** 리소스 그룹 블레이드의 **설정** 섹션에서 배포**를 클릭합니다**.**

1. **az104-rg1 - 배포 블레이드에서 배포** 목록의 첫 번째 항목을 클릭하고 입력** 및 **템플릿** 블레이드의 **콘텐츠를 검토합니다.


## 검토

축하합니다! 이 랩에서는 Azure Portal을 사용하여 관리 디스크에 대한 ARM 템플릿을 만든 다음 템플릿을 사용하여 새 디스크를 배포했습니다.